variables:
  DEBIAN_FRONTEND: noninteractive
  LC_ALL: C
  GIT_STRATEGY: fetch
  DOCKER_CMD: docker --config="$HOME/.docker/$CI_JOB_ID/"

.build: &build_job
  script:
  - autoreconf
  - ./configure --enable-ipv6=$IPV6
  - make

.debian: &debian_env
  image: registry.labs.nic.cz/mvaner/bird:debian
  tags:
  - docker
  - linux
  - amd64

build:
  variables:
    IPV6: "no"
  <<: *debian_env
  <<: *build_job

build-v6:
  variables:
    IPV6: "yes"
  <<: *debian_env
  <<: *build_job
